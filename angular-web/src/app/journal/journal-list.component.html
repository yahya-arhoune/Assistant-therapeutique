<div class="container py-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h2 class="mb-0">My Journal</h2>
    <button class="btn btn-success" type="button" (click)="newEntry()">New Entry</button>
  </div>

  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>
  <div *ngIf="loading" class="text-muted">Loadingâ€¦</div>

  <div *ngIf="showForm" class="mb-4" style="max-width: 720px;">
    <app-journal-form [entry]="editing" (saved)="onSaved()" (cancelled)="onCancelled()"></app-journal-form>
  </div>

  <div class="table-responsive">
    <table class="table table-striped align-middle" *ngIf="!loading">
      <thead>
        <tr>
          <th>Mood</th>
          <th style="width: 140px;">Intensity</th>
          <th>Note</th>
          <th style="width: 200px;">Created</th>
          <th style="width: 160px;"></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let e of entries">
          <td>{{ e.mood }}</td>
          <td>{{ e.intensity }}</td>
          <td class="text-truncate" style="max-width: 420px;">{{ e.note }}</td>
          <td>{{ e.createdAt | date : 'medium' }}</td>
          <td class="text-end">
            <button class="btn btn-sm btn-outline-primary me-2" (click)="edit(e)">Edit</button>
            <button class="btn btn-sm btn-outline-danger" (click)="remove(e)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="!loading && entries.length === 0" class="text-muted">No entries yet.</div>
  </div>
</div>
